# Gitleaks Configuration for Apex v2
# This file configures Gitleaks to ignore false positives

title = "Apex v2 Gitleaks Config"

[extend]
# Use default Gitleaks rules as base
path = ""

[allowlist]
# Files to ignore completely
paths = [
    '''\.env\.example$''',
    '''\.gitleaks\.toml$''',
    '''\.github\/workflows\/.*\.yml$''',
    '''node_modules\/?''',
    '''\.git\/?''',
    '''dist\/?''',
    '''coverage\/?''',
    '''\.turbo\/?''',
]

# Regex patterns to ignore (test secrets, example values)
regexes = [
    # Test JWT secrets
    '''test_secret_key_for_ci_environment_only_32''',
    '''your_very_long_secret_key_minimum_32_chars_long''',
    # Test credentials
    '''apex_secret''',
    '''redis_secret''',
    '''minioadmin''',
    '''minioadmin123''',
    '''postgresql:\/\/test:test@''',
    '''postgresql:\/\/apex:apex@''',
    # Test keys
    '''test_secret_key''',
    '''test_secret_key_for_ci''',
]

# Commits to ignore (if needed)
commits = []

# Specific rules to disable for certain files
[[rules]]
id = "generic-api-key"
[rules.allowlist]
paths = ['''\.env\.example$''', '''\.github\/workflows\/''']

[[rules]]
id = "jwt"
[rules.allowlist]
paths = ['''\.env\.example$''', '''\.github\/workflows\/''']

[[rules]]
id = "database-url"
[rules.allowlist]
paths = ['''\.env\.example$''', '''\.github\/workflows\/''']
